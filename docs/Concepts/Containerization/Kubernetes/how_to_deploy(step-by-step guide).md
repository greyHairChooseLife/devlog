---
hide:
title: '실전 배포하기 step-by-step guide'
date: 2024-04-04
update:
---

## 배포 과정

웹 애플리케이션을 쿠버네티스에 배포하는 과정은 다음과 같은 단계로 진행됩니다. 여기서는 Node.js와 Express를
사용한 백엔드, React를 사용한 프론트엔드, MariaDB를 데이터베이스로 사용하는 웹 애플리케이션을 예로
들겠습니다.

### 1. 도커 이미지 생성

- **백엔드와 프론트엔드**: 각각의 컴포넌트(백엔드, 프론트엔드)를 위한 `Dockerfile`을 작성합니다. 이 파일은
  애플리케이션의 실행 환경을 정의합니다. 예를 들어, 백엔드 `Dockerfile`은 Node.js와 Express 앱을 실행하는
  방법을, 프론트엔드 `Dockerfile`은 빌드된 React 애플리케이션을 정적 파일 서버로 제공하는 방법을 정의합니다.
- **데이터베이스**: MariaDB에 대한 도커 이미지는 공식 이미지를 사용할 수 있습니다.

### 2. 도커 이미지를 레지스트리에 푸시

- 생성된 각 도커 이미지를 도커 허브(Docker Hub)나 프라이빗 도커 레지스트리에 푸시합니다. 이렇게 함으로써
  쿠버네티스 클러스터가 이미지를 가져와 실행할 수 있습니다.

### 3. 쿠버네티스 리소스 정의

- **Deployment**: 백엔드와 프론트엔드 애플리케이션을 위한 `Deployment` 리소스를 정의합니다. 이것은
  애플리케이션의 복제본 수, 도커 이미지, 포트 등을 포함합니다.
- **Service**: 각 `Deployment`를 위한 `Service` 리소스를 생성하여, 클러스터 내에서나 외부에서 애플리케이션에
  접근할 수 있는 방법을 정의합니다.
- **PersistentVolumeClaim**: MariaDB 데이터를 영구적으로 저장할 수 있도록 `PersistentVolumeClaim`을
  정의합니다.
- **Secrets/ConfigMaps**: 데이터베이스 연결 문자열이나 환경 변수 같은 구성 정보를 저장하기 위해 `Secrets`
  또는 `ConfigMaps`을 사용합니다.

### 4. Ingress 설정

- **Ingress**: 백엔드와 프론트엔드 서비스에 대한 외부 접근을 관리하기 위해 `Ingress` 리소스를 정의합니다.
  `Ingress`는 특정 호스트명을 통해 들어오는 요청을 적절한 서비스로 라우팅합니다.

### 5. 쿠버네티스에 배포

- kubectl과 같은 도구를 사용하여 앞서 정의한 쿠버네티스 리소스(`Deployment`, `Service`,
  `PersistentVolumeClaim`, `Secrets/ConfigMaps`, `Ingress`)를 클러스터에 배포합니다.

### 6. 애플리케이션 모니터링 및 유지 관리

- 애플리케이션과 클러스터의 상태를 모니터링하기 위해 Prometheus, Grafana 같은 도구를 설정할 수 있습니다.
  이를 통해 성능 문제를 식별하고 최적화할 수 있습니다.

이 과정을 통해, 개발자는 로컬 환경이나 전체 쿠버네티스 클러스터에서 웹 애플리케이션을 효율적으로 배포하고
관리할 수 있습니다.
